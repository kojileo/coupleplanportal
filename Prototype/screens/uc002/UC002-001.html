<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>共同編集 - CouplePlan</title>
    <link rel="stylesheet" href="../../css/common.css">
    <link rel="stylesheet" href="../../css/components.css">
    <link rel="stylesheet" href="../../css/responsive.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- ナビゲーションバー -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-heart"></i>
                <span>CouplePlan</span>
            </div>
            <div class="nav-menu" id="nav-menu">
                <a href="../auth/AUTH-001.html" class="nav-link">ログイン</a>
                <a href="../uc003/UC003-001.html" class="nav-link">ポータル</a>
                <a href="../common/COMMON-001.html" class="nav-link">ダッシュボード</a>
            </div>
            <div class="nav-toggle" id="nav-toggle">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <!-- メインコンテンツ -->
    <main class="main-content">
        <div class="container">
            <!-- ヘッダー -->
            <div class="page-header">
                <div class="header-content">
                    <h1 class="page-title">共同編集</h1>
                    <p class="page-subtitle">パートナーと一緒にデートプランを編集しましょう</p>
                </div>
                <div class="header-actions">
                    <button class="btn btn-secondary" onclick="goBack()">
                        <i class="fas fa-arrow-left"></i>
                        戻る
                    </button>
                </div>
            </div>

            <!-- 共同編集ツールバー -->
            <div class="collaboration-toolbar">
                <div class="toolbar-left">
                    <div class="collaboration-status">
                        <div class="status-indicator online"></div>
                        <span class="status-text">パートナーがオンライン</span>
                    </div>
                    <div class="collaboration-users">
                        <div class="user-avatar">
                            <img src="../../assets/images/user1.jpg" alt="あなた" onerror="this.style.display='none'">
                            <div class="avatar-placeholder">
                                <i class="fas fa-user"></i>
                            </div>
                        </div>
                        <div class="user-avatar">
                            <img src="../../assets/images/user2.jpg" alt="パートナー" onerror="this.style.display='none'">
                            <div class="avatar-placeholder">
                                <i class="fas fa-user"></i>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="toolbar-center">
                    <div class="edit-mode">
                        <button class="btn btn-sm" id="viewMode" onclick="toggleEditMode('view')">
                            <i class="fas fa-eye"></i>
                            表示
                        </button>
                        <button class="btn btn-sm btn-primary" id="editMode" onclick="toggleEditMode('edit')">
                            <i class="fas fa-edit"></i>
                            編集
                        </button>
                    </div>
                </div>
                
                <div class="toolbar-right">
                    <button class="btn btn-sm btn-outline" onclick="showHistory()">
                        <i class="fas fa-history"></i>
                        履歴
                    </button>
                    <button class="btn btn-sm btn-outline" onclick="showComments()">
                        <i class="fas fa-comments"></i>
                        コメント
                    </button>
                    <button class="btn btn-sm btn-primary" onclick="savePlan()">
                        <i class="fas fa-save"></i>
                        保存
                    </button>
                </div>
            </div>

            <!-- 編集エリア -->
            <div class="edit-container">
                <!-- 左サイドバー - プラン情報 -->
                <div class="plan-sidebar">
                    <div class="sidebar-section">
                        <h3>プラン情報</h3>
                        <div class="plan-info">
                            <div class="info-item">
                                <span class="info-label">タイトル</span>
                                <input type="text" class="form-input" value="東京タワー夜景デート" id="planTitle">
                            </div>
                            <div class="info-item">
                                <span class="info-label">日時</span>
                                <input type="date" class="form-input" value="2025-01-25" id="planDate">
                            </div>
                            <div class="info-item">
                                <span class="info-label">開始時間</span>
                                <input type="time" class="form-input" value="14:00" id="planTime">
                            </div>
                            <div class="info-item">
                                <span class="info-label">予算</span>
                                <input type="number" class="form-input" value="15000" id="planBudget">
                            </div>
                        </div>
                    </div>
                    
                    <div class="sidebar-section">
                        <h3>参加者</h3>
                        <div class="participants">
                            <div class="participant-item">
                                <div class="participant-avatar">
                                    <img src="../../assets/images/user1.jpg" alt="あなた" onerror="this.style.display='none'">
                                    <div class="avatar-placeholder">
                                        <i class="fas fa-user"></i>
                                    </div>
                                </div>
                                <div class="participant-info">
                                    <h4>あなた</h4>
                                    <span class="participant-status online">オンライン</span>
                                </div>
                            </div>
                            
                            <div class="participant-item">
                                <div class="participant-avatar">
                                    <img src="../../assets/images/user2.jpg" alt="パートナー" onerror="this.style.display='none'">
                                    <div class="avatar-placeholder">
                                        <i class="fas fa-user"></i>
                                    </div>
                                </div>
                                <div class="participant-info">
                                    <h4>田中 花子</h4>
                                    <span class="participant-status online">オンライン</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="sidebar-section">
                        <h3>編集履歴</h3>
                        <div class="edit-history">
                            <div class="history-item">
                                <div class="history-time">14:30</div>
                                <div class="history-content">
                                    <span class="history-user">田中 花子</span>
                                    <span class="history-action">レストランを変更</span>
                                </div>
                            </div>
                            <div class="history-item">
                                <div class="history-time">14:25</div>
                                <div class="history-content">
                                    <span class="history-user">あなた</span>
                                    <span class="history-action">時間を調整</span>
                                </div>
                            </div>
                            <div class="history-item">
                                <div class="history-time">14:20</div>
                                <div class="history-content">
                                    <span class="history-user">田中 花子</span>
                                    <span class="history-action">プランを作成</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- メイン編集エリア -->
                <div class="edit-main">
                    <!-- プラン概要 -->
                    <div class="edit-section">
                        <div class="section-header">
                            <h2>プラン概要</h2>
                            <div class="section-actions">
                                <button class="btn btn-sm btn-outline" onclick="addComment('overview')">
                                    <i class="fas fa-comment"></i>
                                    コメント
                                </button>
                            </div>
                        </div>
                        <div class="edit-content">
                            <textarea class="form-textarea" id="planOverview" placeholder="プランの概要を入力してください">東京タワーからの夜景を楽しみ、近くのレストランでディナー。ロマンチックな夜をお約束します。</textarea>
                        </div>
                    </div>

                    <!-- スケジュール編集 -->
                    <div class="edit-section">
                        <div class="section-header">
                            <h2>スケジュール</h2>
                            <div class="section-actions">
                                <button class="btn btn-sm btn-primary" onclick="addScheduleItem()">
                                    <i class="fas fa-plus"></i>
                                    追加
                                </button>
                                <button class="btn btn-sm btn-outline" onclick="addComment('schedule')">
                                    <i class="fas fa-comment"></i>
                                    コメント
                                </button>
                            </div>
                        </div>
                        <div class="edit-content">
                            <div class="schedule-editor">
                                <div class="schedule-item" data-id="1">
                                    <div class="schedule-time">
                                        <input type="time" class="form-input" value="14:00">
                                    </div>
                                    <div class="schedule-content">
                                        <input type="text" class="form-input" value="東京タワー到着" placeholder="タイトル">
                                        <textarea class="form-textarea" placeholder="詳細">メインデッキで東京の街並みを一望</textarea>
                                    </div>
                                    <div class="schedule-actions">
                                        <button class="btn btn-sm btn-outline" onclick="moveScheduleItem(1, 'up')">
                                            <i class="fas fa-arrow-up"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline" onclick="moveScheduleItem(1, 'down')">
                                            <i class="fas fa-arrow-down"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline" onclick="deleteScheduleItem(1)">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="schedule-item" data-id="2">
                                    <div class="schedule-time">
                                        <input type="time" class="form-input" value="14:30">
                                    </div>
                                    <div class="schedule-content">
                                        <input type="text" class="form-input" value="トップデッキツアー" placeholder="タイトル">
                                        <textarea class="form-textarea" placeholder="詳細">特別な展望台でより高い位置から景色を楽しむ</textarea>
                                    </div>
                                    <div class="schedule-actions">
                                        <button class="btn btn-sm btn-outline" onclick="moveScheduleItem(2, 'up')">
                                            <i class="fas fa-arrow-up"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline" onclick="moveScheduleItem(2, 'down')">
                                            <i class="fas fa-arrow-down"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline" onclick="deleteScheduleItem(2)">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="schedule-item" data-id="3">
                                    <div class="schedule-time">
                                        <input type="time" class="form-input" value="16:00">
                                    </div>
                                    <div class="schedule-content">
                                        <input type="text" class="form-input" value="ディナーレストラン" placeholder="タイトル">
                                        <textarea class="form-textarea" placeholder="詳細">東京タワーを眺めながらのロマンチックディナー</textarea>
                                    </div>
                                    <div class="schedule-actions">
                                        <button class="btn btn-sm btn-outline" onclick="moveScheduleItem(3, 'up')">
                                            <i class="fas fa-arrow-up"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline" onclick="moveScheduleItem(3, 'down')">
                                            <i class="fas fa-arrow-down"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline" onclick="deleteScheduleItem(3)">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- スポット編集 -->
                    <div class="edit-section">
                        <div class="section-header">
                            <h2>訪問スポット</h2>
                            <div class="section-actions">
                                <button class="btn btn-sm btn-primary" onclick="addSpot()">
                                    <i class="fas fa-plus"></i>
                                    追加
                                </button>
                                <button class="btn btn-sm btn-outline" onclick="addComment('spots')">
                                    <i class="fas fa-comment"></i>
                                    コメント
                                </button>
                            </div>
                        </div>
                        <div class="edit-content">
                            <div class="spots-editor">
                                <div class="spot-item" data-id="1">
                                    <div class="spot-image">
                                        <img src="../../assets/images/tokyo-tower.jpg" alt="東京タワー" onerror="this.style.display='none'">
                                        <div class="image-placeholder">
                                            <i class="fas fa-image"></i>
                                        </div>
                                    </div>
                                    <div class="spot-content">
                                        <input type="text" class="form-input" value="東京タワー" placeholder="スポット名">
                                        <textarea class="form-textarea" placeholder="説明">東京のシンボルタワー。展望台からは東京の街並みが一望できます。</textarea>
                                        <div class="spot-details">
                                            <input type="text" class="form-input" value="1時間15分" placeholder="所要時間">
                                            <input type="text" class="form-input" value="1,200円" placeholder="料金">
                                        </div>
                                    </div>
                                    <div class="spot-actions">
                                        <button class="btn btn-sm btn-outline" onclick="uploadSpotImage(1)">
                                            <i class="fas fa-upload"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline" onclick="deleteSpot(1)">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="spot-item" data-id="2">
                                    <div class="spot-image">
                                        <img src="../../assets/images/restaurant.jpg" alt="レストラン" onerror="this.style.display='none'">
                                        <div class="image-placeholder">
                                            <i class="fas fa-image"></i>
                                        </div>
                                    </div>
                                    <div class="spot-content">
                                        <input type="text" class="form-input" value="レストラン ル・シエル" placeholder="スポット名">
                                        <textarea class="form-textarea" placeholder="説明">東京タワーを眺めながら楽しめるフレンチレストラン。</textarea>
                                        <div class="spot-details">
                                            <input type="text" class="form-input" value="2時間" placeholder="所要時間">
                                            <input type="text" class="form-input" value="12,000円" placeholder="料金">
                                        </div>
                                    </div>
                                    <div class="spot-actions">
                                        <button class="btn btn-sm btn-outline" onclick="uploadSpotImage(2)">
                                            <i class="fas fa-upload"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline" onclick="deleteSpot(2)">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- メモ・コメント -->
                    <div class="edit-section">
                        <div class="section-header">
                            <h2>メモ・コメント</h2>
                        </div>
                        <div class="edit-content">
                            <div class="comments-section">
                                <div class="comment-item">
                                    <div class="comment-avatar">
                                        <img src="../../assets/images/user2.jpg" alt="パートナー" onerror="this.style.display='none'">
                                        <div class="avatar-placeholder">
                                            <i class="fas fa-user"></i>
                                        </div>
                                    </div>
                                    <div class="comment-content">
                                        <div class="comment-header">
                                            <span class="comment-author">田中 花子</span>
                                            <span class="comment-time">14:30</span>
                                        </div>
                                        <div class="comment-text">
                                            レストランは予約が必要だと思います。早めに予約しましょう。
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="comment-item">
                                    <div class="comment-avatar">
                                        <img src="../../assets/images/user1.jpg" alt="あなた" onerror="this.style.display='none'">
                                        <div class="avatar-placeholder">
                                            <i class="fas fa-user"></i>
                                        </div>
                                    </div>
                                    <div class="comment-content">
                                        <div class="comment-header">
                                            <span class="comment-author">あなた</span>
                                            <span class="comment-time">14:35</span>
                                        </div>
                                        <div class="comment-text">
                                            了解しました。明日予約を入れます。
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="comment-input">
                                    <div class="comment-avatar">
                                        <img src="../../assets/images/user1.jpg" alt="あなた" onerror="this.style.display='none'">
                                        <div class="avatar-placeholder">
                                            <i class="fas fa-user"></i>
                                        </div>
                                    </div>
                                    <div class="comment-form">
                                        <textarea class="form-textarea" placeholder="コメントを入力..." id="newComment"></textarea>
                                        <button class="btn btn-primary btn-sm" onclick="addComment()">
                                            <i class="fas fa-paper-plane"></i>
                                            送信
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- フッターアクション -->
            <div class="footer-actions">
                <div class="action-left">
                    <button class="btn btn-outline" onclick="previewPlan()">
                        <i class="fas fa-eye"></i>
                        プレビュー
                    </button>
                    <button class="btn btn-outline" onclick="exportPlan()">
                        <i class="fas fa-download"></i>
                        エクスポート
                    </button>
                </div>
                <div class="action-right">
                    <button class="btn btn-secondary" onclick="cancelEdit()">
                        <i class="fas fa-times"></i>
                        キャンセル
                    </button>
                    <button class="btn btn-primary" onclick="completePlan()">
                        <i class="fas fa-check"></i>
                        完了
                    </button>
                </div>
            </div>
        </div>
    </main>

    <script src="../../js/common.js"></script>
    <script/src="../../js/navigation.js"></script>
    <script>
        let isEditMode = true;
        let scheduleItemId = 3;
        let spotItemId = 2;
        
        document.addEventListener('DOMContentLoaded', function() {
            initializeCollaboration();
        });
        
        function initializeCollaboration() {
            // リアルタイム同期の初期化
            initializeRealtimeSync();
            
            // 編集モードの初期化
            updateEditMode();
        }
        
        function initializeRealtimeSync() {
            // 実際の実装ではWebSocketやServer-Sent Eventsを使用
            console.log('リアルタイム同期を初期化しました');
        }
        
        function toggleEditMode(mode) {
            isEditMode = mode === 'edit';
            updateEditMode();
        }
        
        function updateEditMode() {
            const viewMode = document.getElementById('viewMode');
            const editMode = document.getElementById('editMode');
            const editInputs = document.querySelectorAll('.edit-content input, .edit-content textarea');
            
            if (isEditMode) {
                viewMode.classList.remove('btn-primary');
                editMode.classList.add('btn-primary');
                editInputs.forEach(input => {
                    input.disabled = false;
                    input.style.backgroundColor = '';
                });
            } else {
                viewMode.classList.add('btn-primary');
                editMode.classList.remove('btn-primary');
                editInputs.forEach(input => {
                    input.disabled = true;
                    input.style.backgroundColor = 'var(--gray-100)';
                });
            }
        }
        
        function addScheduleItem() {
            scheduleItemId++;
            const scheduleEditor = document.querySelector('.schedule-editor');
            const newItem = document.createElement('div');
            newItem.className = 'schedule-item';
            newItem.dataset.id = scheduleItemId;
            newItem.innerHTML = `
                <div class="schedule-time">
                    <input type="time" class="form-input" value="18:00">
                </div>
                <div class="schedule-content">
                    <input type="text" class="form-input" placeholder="タイトル">
                    <textarea class="form-textarea" placeholder="詳細"></textarea>
                </div>
                <div class="schedule-actions">
                    <button class="btn btn-sm btn-outline" onclick="moveScheduleItem(${scheduleItemId}, 'up')">
                        <i class="fas fa-arrow-up"></i>
                    </button>
                    <button class="btn btn-sm btn-outline" onclick="moveScheduleItem(${scheduleItemId}, 'down')">
                        <i class="fas fa-arrow-down"></i>
                    </button>
                    <button class="btn btn-sm btn-outline" onclick="deleteScheduleItem(${scheduleItemId})">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            `;
            scheduleEditor.appendChild(newItem);
        }
        
        function moveScheduleItem(id, direction) {
            const item = document.querySelector(`[data-id="${id}"]`);
            if (direction === 'up' && item.previousElementSibling) {
                item.parentNode.insertBefore(item, item.previousElementSibling);
            } else if (direction === 'down' && item.nextElementSibling) {
                item.parentNode.insertBefore(item.nextElementSibling, item);
            }
        }
        
        function deleteScheduleItem(id) {
            if (confirm('このスケジュール項目を削除しますか？')) {
                document.querySelector(`[data-id="${id}"]`).remove();
            }
        }
        
        function addSpot() {
            spotItemId++;
            const spotsEditor = document.querySelector('.spots-editor');
            const newItem = document.createElement('div');
            newItem.className = 'spot-item';
            newItem.dataset.id = spotItemId;
            newItem.innerHTML = `
                <div class="spot-image">
                    <div class="image-placeholder">
                        <i class="fas fa-image"></i>
                    </div>
                </div>
                <div class="spot-content">
                    <input type="text" class="form-input" placeholder="スポット名">
                    <textarea class="form-textarea" placeholder="説明"></textarea>
                    <div class="spot-details">
                        <input type="text" class="form-input" placeholder="所要時間">
                        <input type="text" class="form-input" placeholder="料金">
                    </div>
                </div>
                <div class="spot-actions">
                    <button class="btn btn-sm btn-outline" onclick="uploadSpotImage(${spotItemId})">
                        <i class="fas fa-upload"></i>
                    </button>
                    <button class="btn btn-sm btn-outline" onclick="deleteSpot(${spotItemId})">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            `;
            spotsEditor.appendChild(newItem);
        }
        
        function deleteSpot(id) {
            if (confirm('このスポットを削除しますか？')) {
                document.querySelector(`[data-id="${id}"]`).remove();
            }
        }
        
        function uploadSpotImage(id) {
            // 実際の実装では画像アップロード処理
            showInfo('画像アップロード機能は実装中です');
        }
        
        function addComment(section) {
            if (section) {
                showInfo(`${section}セクションにコメントを追加`);
            } else {
                const commentText = document.getElementById('newComment').value;
                if (commentText.trim()) {
                    // コメントを追加
                    addCommentToUI(commentText);
                    document.getElementById('newComment').value = '';
                }
            }
        }
        
        function addCommentToUI(text) {
            const commentsSection = document.querySelector('.comments-section');
            const newComment = document.createElement('div');
            newComment.className = 'comment-item';
            newComment.innerHTML = `
                <div class="comment-avatar">
                    <img src="../../assets/images/user1.jpg" alt="あなた" onerror="this.style.display='none'">
                    <div class="avatar-placeholder">
                        <i class="fas fa-user"></i>
                    </div>
                </div>
                <div class="comment-content">
                    <div class="comment-header">
                        <span class="comment-author">あなた</span>
                        <span class="comment-time">${new Date().toLocaleTimeString('ja-JP', {hour: '2-digit', minute: '2-digit'})}</span>
                    </div>
                    <div class="comment-text">${text}</div>
                </div>
            `;
            commentsSection.insertBefore(newComment, commentsSection.lastElementChild);
        }
        
        function savePlan() {
            showSuccess('プランを保存しました');
        }
        
        function previewPlan() {
            window.open('UC001-004.html', '_blank');
        }
        
        function exportPlan() {
            showInfo('プランをエクスポートしました');
        }
        
        function cancelEdit() {
            if (confirm('編集をキャンセルしますか？変更内容は保存されません。')) {
                window.location.href = '../common/COMMON-001.html';
            }
        }
        
        function completePlan() {
            showSuccess('プランが完了しました');
            setTimeout(() => {
                window.location.href = '../uc005/UC005-001.html';
            }, 1000);
        }
        
        function showHistory() {
            showInfo('編集履歴を表示');
        }
        
        function showComments() {
            showInfo('コメント一覧を表示');
        }
    </script>
    
    <style>
        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-6);
        }
        
        .page-title {
            font-size: var(--text-3xl);
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: var(--space-2);
        }
        
        .page-subtitle {
            color: var(--text-secondary);
            font-size: var(--text-lg);
        }
        
        .collaboration-toolbar {
            background-color: var(--white);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            padding: var(--space-4);
            margin-bottom: var(--space-6);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .toolbar-left {
            display: flex;
            align-items: center;
            gap: var(--space-4);
        }
        
        .collaboration-status {
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }
        
        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: var(--secondary-color);
        }
        
        .status-indicator.online {
            background-color: var(--secondary-color);
        }
        
        .status-indicator.offline {
            background-color: var(--gray-400);
        }
        
        .status-text {
            color: var(--text-secondary);
            font-size: var(--text-sm);
        }
        
        .collaboration-users {
            display: flex;
            gap: var(--space-2);
        }
        
        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: var(--radius-full);
            overflow: hidden;
            border: 2px solid var(--white);
            box-shadow: var(--shadow-sm);
        }
        
        .user-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .avatar-placeholder {
            width: 100%;
            height: 100%;
            background-color: var(--gray-200);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            font-size: var(--text-sm);
        }
        
        .toolbar-center {
            display: flex;
            gap: var(--space-2);
        }
        
        .edit-mode {
            display: flex;
            gap: var(--space-1);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-md);
            overflow: hidden;
        }
        
        .toolbar-right {
            display: flex;
            gap: var(--space-2);
        }
        
        .edit-container {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: var(--space-6);
            margin-bottom: var(--space-8);
        }
        
        .plan-sidebar {
            display: flex;
            flex-direction: column;
            gap: var(--space-6);
        }
        
        .sidebar-section {
            background-color: var(--white);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            padding: var(--space-4);
        }
        
        .sidebar-section h3 {
            font-size: var(--text-lg);
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--space-4);
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: var(--space-2);
        }
        
        .plan-info {
            display: flex;
            flex-direction: column;
            gap: var(--space-3);
        }
        
        .info-item {
            display: flex;
            flex-direction: column;
            gap: var(--space-1);
        }
        
        .info-label {
            font-size: var(--text-sm);
            color: var(--text-secondary);
            font-weight: 500;
        }
        
        .participants {
            display: flex;
            flex-direction: column;
            gap: var(--space-3);
        }
        
        .participant-item {
            display: flex;
            align-items: center;
            gap: var(--space-3);
        }
        
        .participant-avatar {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-full);
            overflow: hidden;
            flex-shrink: 0;
        }
        
        .participant-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .participant-info h4 {
            font-size: var(--text-base);
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--space-1);
        }
        
        .participant-status {
            font-size: var(--text-sm);
            font-weight: 500;
        }
        
        .participant-status.online {
            color: var(--secondary-color);
        }
        
        .participant-status.offline {
            color: var(--text-secondary);
        }
        
        .edit-history {
            display: flex;
            flex-direction: column;
            gap: var(--space-3);
        }
        
        .history-item {
            display: flex;
            gap: var(--space-3);
            padding: var(--space-2);
            background-color: var(--gray-50);
            border-radius: var(--radius-md);
        }
        
        .history-time {
            font-size: var(--text-sm);
            color: var(--text-secondary);
            font-weight: 500;
            min-width: 40px;
        }
        
        .history-content {
            flex: 1;
            font-size: var(--text-sm);
        }
        
        .history-user {
            color: var(--primary-color);
            font-weight: 500;
        }
        
        .history-action {
            color: var(--text-secondary);
        }
        
        .edit-main {
            display: flex;
            flex-direction: column;
            gap: var(--space-6);
        }
        
        .edit-section {
            background-color: var(--white);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            overflow: hidden;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-4);
            background-color: var(--gray-50);
            border-bottom: 1px solid var(--border-light);
        }
        
        .section-header h2 {
            font-size: var(--text-xl);
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .section-actions {
            display: flex;
            gap: var(--space-2);
        }
        
        .edit-content {
            padding: var(--space-6);
        }
        
        .schedule-editor {
            display: flex;
            flex-direction: column;
            gap: var(--space-4);
        }
        
        .schedule-item {
            display: flex;
            gap: var(--space-4);
            padding: var(--space-4);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-lg);
            background-color: var(--gray-50);
        }
        
        .schedule-time {
            min-width: 100px;
        }
        
        .schedule-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: var(--space-2);
        }
        
        .schedule-actions {
            display: flex;
            flex-direction: column;
            gap: var(--space-1);
        }
        
        .spots-editor {
            display: flex;
            flex-direction: column;
            gap: var(--space-4);
        }
        
        .spot-item {
            display: flex;
            gap: var(--space-4);
            padding: var(--space-4);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-lg);
            background-color: var(--gray-50);
        }
        
        .spot-image {
            width: 100px;
            height: 100px;
            border-radius: var(--radius-md);
            overflow: hidden;
            flex-shrink: 0;
        }
        
        .spot-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .image-placeholder {
            width: 100%;
            height: 100%;
            background-color: var(--gray-200);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
        }
        
        .spot-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: var(--space-2);
        }
        
        .spot-details {
            display: flex;
            gap: var(--space-2);
        }
        
        .spot-details input {
            flex: 1;
        }
        
        .spot-actions {
            display: flex;
            flex-direction: column;
            gap: var(--space-1);
        }
        
        .comments-section {
            display: flex;
            flex-direction: column;
            gap: var(--space-4);
        }
        
        .comment-item {
            display: flex;
            gap: var(--space-3);
        }
        
        .comment-avatar {
            width: 32px;
            height: 32px;
            border-radius: var(--radius-full);
            overflow: hidden;
            flex-shrink: 0;
        }
        
        .comment-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .comment-content {
            flex: 1;
        }
        
        .comment-header {
            display: flex;
            gap: var(--space-2);
            margin-bottom: var(--space-1);
        }
        
        .comment-author {
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .comment-time {
            color: var(--text-secondary);
            font-size: var(--text-sm);
        }
        
        .comment-text {
            color: var(--text-secondary);
            line-height: 1.5;
        }
        
        .comment-input {
            display: flex;
            gap: var(--space-3);
            padding: var(--space-4);
            background-color: var(--gray-50);
            border-radius: var(--radius-lg);
        }
        
        .comment-form {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: var(--space-2);
        }
        
        .footer-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-6);
            background-color: var(--white);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
        }
        
        .action-left,
        .action-right {
            display: flex;
            gap: var(--space-3);
        }
        
        @media (max-width: 768px) {
            .page-header {
                flex-direction: column;
                align-items: flex-start;
                gap: var(--space-4);
            }
            
            .collaboration-toolbar {
                flex-direction: column;
                gap: var(--space-4);
            }
            
            .toolbar-left,
            .toolbar-center,
            .toolbar-right {
                width: 100%;
                justify-content: center;
            }
            
            .edit-container {
                grid-template-columns: 1fr;
            }
            
            .schedule-item,
            .spot-item {
                flex-direction: column;
            }
            
            .schedule-actions,
            .spot-actions {
                flex-direction: row;
            }
            
            .footer-actions {
                flex-direction: column;
                gap: var(--space-4);
            }
            
            .action-left,
            .action-right {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</body>
</html>
