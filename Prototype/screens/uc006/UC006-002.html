<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>レコメンド - CouplePlan</title>
    <link rel="stylesheet" href="../../css/common.css">
    <link rel="stylesheet" href="../../css/components.css">
    <link rel="stylesheet" href="../../css/responsive.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- ナビゲーションバー -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-heart"></i>
                <span>CouplePlan</span>
            </div>
            <div class="nav-menu" id="nav-menu">
                <a href="../auth/AUTH-001.html" class="nav-link">ログイン</a>
                <a href="../uc003/UC003-001.html" class="nav-link">ポータル</a>
                <a href="../common/COMMON-001.html" class="nav-link">ダッシュボード</a>
            </div>
            <div class="nav-toggle" id="nav-toggle">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <!-- メインコンテンツ -->
    <main class="main-content">
        <div class="container">
            <!-- ヘッダー -->
            <div class="page-header">
                <div class="header-content">
                    <h1 class="page-title">Memory Sparks レコメンド</h1>
                    <p class="page-subtitle">あなたたちの思い出に基づいたパーソナライズされた提案</p>
                </div>
                <div class="header-actions">
                    <button class="btn btn-secondary" onclick="goBack()">
                        <i class="fas fa-arrow-left"></i>
                        戻る
                    </button>
                </div>
            </div>

            <!-- レコメンド概要 -->
            <div class="recommendations-overview">
                <div class="overview-header">
                    <h2>あなたたち専用のレコメンド</h2>
                    <p>AIが分析した思い出から、特別な提案を生成しました</p>
                </div>
                
                <div class="overview-stats">
                    <div class="stat-item">
                        <div class="stat-value">12</div>
                        <div class="stat-label">レコメンド</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">89%</div>
                        <div class="stat-label">マッチ度</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">3</div>
                        <div class="stat-label">カテゴリー</div>
                    </div>
                </div>
            </div>

            <!-- レコメンドカテゴリー -->
            <div class="recommendations-categories">
                <div class="category-tabs">
                    <button class="tab-btn active" onclick="showCategory('all')">
                        <i class="fas fa-th"></i>
                        すべて
                    </button>
                    <button class="tab-btn" onclick="showCategory('date')">
                        <i class="fas fa-heart"></i>
                        デート
                    </button>
                    <button class="tab-btn" onclick="showCategory('gift')">
                        <i class="fas fa-gift"></i>
                        ギフト
                    </button>
                    <button class="tab-btn" onclick="showCategory('experience')">
                        <i class="fas fa-star"></i>
                        体験
                    </button>
                </div>
            </div>

            <!-- レコメンド一覧 -->
            <div class="recommendations-container">
                <!-- デートレコメンド -->
                <div class="recommendation-section" data-category="date">
                    <div class="section-header">
                        <h3>デートレコメンド</h3>
                        <p>あなたたちの好みに基づいたデートプラン</p>
                    </div>
                    
                    <div class="recommendations-grid">
                        <div class="recommendation-card">
                            <div class="card-image">
                                <img src="../../assets/images/rec-date1.jpg" alt="レコメンド" onerror="this.style.display='none'">
                                <div class="card-badge">
                                    <i class="fas fa-heart"></i>
                                    <span>ロマンチック</span>
                                </div>
                            </div>
                            <div class="card-content">
                                <div class="card-header">
                                    <h4>夜景レストラン</h4>
                                    <div class="match-score">
                                        <i class="fas fa-star"></i>
                                        <span>95%</span>
                                    </div>
                                </div>
                                <div class="card-description">
                                    <p>東京タワーでの思い出から、夜景が美しいレストランを提案。特別な夜を演出できます。</p>
                                </div>
                                <div class="card-reason">
                                    <h5>なぜこの提案？</h5>
                                    <p>あなたたちは夜景を好む傾向があり、東京タワーでの思い出が特に印象的でした。</p>
                                </div>
                                <div class="card-tags">
                                    <span class="tag">夜景</span>
                                    <span class="tag">レストラン</span>
                                    <span class="tag">ロマンチック</span>
                                </div>
                                <div class="card-actions">
                                    <button class="btn btn-primary" onclick="selectRecommendation(1)">
                                        <i class="fas fa-check"></i>
                                        選択
                                    </button>
                                    <button class="btn btn-outline" onclick="viewDetails(1)">
                                        <i class="fas fa-info"></i>
                                        詳細
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="recommendation-card">
                            <div class="card-image">
                                <img src="../../assets/images/rec-date2.jpg" alt="レコメンド" onerror="this.style.display='none'">
                                <div class="card-badge">
                                    <i class="fas fa-leaf"></i>
                                    <span>自然</span>
                                </div>
                            </div>
                            <div class="card-content">
                                <div class="card-header">
                                    <h4>公園散歩</h4>
                                    <div class="match-score">
                                        <i class="fas fa-star"></i>
                                        <span>87%</span>
                                    </div>
                                </div>
                                <div class="card-description">
                                    <p>芝公園での思い出から、自然の中でゆっくり過ごせる公園を提案。</p>
                                </div>
                                <div class="card-reason">
                                    <h5>なぜこの提案？</h5>
                                    <p>芝公園での散歩が印象的で、自然の中で過ごす時間を好む傾向があります。</p>
                                </div>
                                <div class="card-tags">
                                    <span class="tag">自然</span>
                                    <span class="tag">散歩</span>
                                    <span class="tag">リラックス</span>
                                </div>
                                <div class="card-actions">
                                    <button class="btn btn-primary" onclick="selectRecommendation(2)">
                                        <i class="fas fa-check"></i>
                                        選択
                                    </button>
                                    <button class="btn btn-outline" onclick="viewDetails(2)">
                                        <i class="fas fa-info"></i>
                                        詳細
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ギフトレコメンド -->
                <div class="recommendation-section" data-category="gift">
                    <div class="section-header">
                        <h3>ギフトレコメンド</h3>
                        <p>パートナーの好みに基づいたギフト提案</p>
                    </div>
                    
                    <div class="recommendations-grid">
                        <div class="recommendation-card">
                            <div class="card-image">
                                <img src="../../assets/images/rec-gift1.jpg" alt="レコメンド" onerror="this.style.display='none'">
                                <div class="card-badge">
                                    <i class="fas fa-gift"></i>
                                    <span>サプライズ</span>
                                </div>
                            </div>
                            <div class="card-content">
                                <div class="card-header">
                                    <h4>カスタムフォトブック</h4>
                                    <div class="match-score">
                                        <i class="fas fa-star"></i>
                                        <span>92%</span>
                                    </div>
                                </div>
                                <div class="card-description">
                                    <p>一緒に撮った写真をまとめたフォトブック。思い出を形に残せます。</p>
                                </div>
                                <div class="card-reason">
                                    <h5>なぜこの提案？</h5>
                                    <p>写真を大切にする傾向があり、記念日でのサプライズが印象的でした。</p>
                                </div>
                                <div class="card-tags">
                                    <span class="tag">写真</span>
                                    <span class="tag">記念品</span>
                                    <span class="tag">サプライズ</span>
                                </div>
                                <div class="card-actions">
                                    <button class="btn btn-primary" onclick="selectRecommendation(3)">
                                        <i class="fas fa-check"></i>
                                        選択
                                    </button>
                                    <button class="btn btn-outline" onclick="viewDetails(3)">
                                        <i class="fas fa-info"></i>
                                        詳細
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="recommendation-card">
                            <div class="card-image">
                                <img src="../../assets/images/rec-gift2.jpg" alt="レコメンド" onerror="this.style.display='none'">
                                <div class="card-badge">
                                    <i class="fas fa-utensils"></i>
                                    <span>グルメ</span>
                                </div>
                            </div>
                            <div class="card-content">
                                <div class="card-header">
                                    <h4>高級チョコレート</h4>
                                    <div class="match-score">
                                        <i class="fas fa-star"></i>
                                        <span>88%</span>
                                    </div>
                                </div>
                                <div class="card-description">
                                    <p>一緒に料理を楽しむ傾向から、高級チョコレートを提案。</p>
                                </div>
                                <div class="card-reason">
                                    <h5>なぜこの提案？</h5>
                                    <p>一緒に料理を作る思い出があり、グルメを楽しむ傾向があります。</p>
                                </div>
                                <div class="card-tags">
                                    <span class="tag">グルメ</span>
                                    <span class="tag">チョコレート</span>
                                    <span class="tag">高級</span>
                                </div>
                                <div class="card-actions">
                                    <button class="btn btn-primary" onclick="selectRecommendation(4)">
                                        <i class="fas fa-check"></i>
                                        選択
                                    </button>
                                    <button class="btn btn-outline" onclick="viewDetails(4)">
                                        <i class="fas fa-info"></i>
                                        詳細
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 体験レコメンド -->
                <div class="recommendation-section" data-category="experience">
                    <div class="section-header">
                        <h3>体験レコメンド</h3>
                        <p>新しい体験で関係を深めましょう</p>
                    </div>
                    
                    <div class="recommendations-grid">
                        <div class="recommendation-card">
                            <div class="card-image">
                                <img src="../../assets/images/rec-exp1.jpg" alt="レコメンド" onerror="this.style.display='none'">
                                <div class="card-badge">
                                    <i class="fas fa-plane"></i>
                                    <span>旅行</span>
                                </div>
                            </div>
                            <div class="card-content">
                                <div class="card-header">
                                    <h4>温泉旅行</h4>
                                    <div class="match-score">
                                        <i class="fas fa-star"></i>
                                        <span>94%</span>
                                    </div>
                                </div>
                                <div class="card-description">
                                    <p>温泉旅行の思い出から、新しい温泉地への旅行を提案。</p>
                                </div>
                                <div class="card-reason">
                                    <h5>なぜこの提案？</h5>
                                    <p>温泉旅行が印象的で、リラックスできる時間を好む傾向があります。</p>
                                </div>
                                <div class="card-tags">
                                    <span class="tag">旅行</span>
                                    <span class="tag">温泉</span>
                                    <span class="tag">リラックス</span>
                                </div>
                                <div class="card-actions">
                                    <button class="btn btn-primary" onclick="selectRecommendation(5)">
                                        <i class="fas fa-check"></i>
                                        選択
                                    </button>
                                    <button class="btn btn-outline" onclick="viewDetails(5)">
                                        <i class="fas fa-info"></i>
                                        詳細
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="recommendation-card">
                            <div class="card-image">
                                <img src="../../assets/images/rec-exp2.jpg" alt="レコメンド" onerror="this.style.display='none'">
                                <div class="card-badge">
                                    <i class="fas fa-palette"></i>
                                    <span>アート</span>
                                </div>
                            </div>
                            <div class="card-content">
                                <div class="card-header">
                                    <h4>陶芸体験</h4>
                                    <div class="match-score">
                                        <i class="fas fa-star"></i>
                                        <span>85%</span>
                                    </div>
                                </div>
                                <div class="card-description">
                                    <p>一緒に何かを作る体験から、陶芸体験を提案。</p>
                                </div>
                                <div class="card-reason">
                                    <h5>なぜこの提案？</h5>
                                    <p>一緒に料理を作る思い出があり、共同作業を楽しむ傾向があります。</p>
                                </div>
                                <div class="card-tags">
                                    <span class="tag">体験</span>
                                    <span class="tag">陶芸</span>
                                    <span class="tag">共同作業</span>
                                </div>
                                <div class="card-actions">
                                    <button class="btn btn-primary" onclick="selectRecommendation(6)">
                                        <i class="fas fa-check"></i>
                                        選択
                                    </button>
                                    <button class="btn btn-outline" onclick="viewDetails(6)">
                                        <i class="fas fa-info"></i>
                                        詳細
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 選択されたレコメンド -->
            <div class="selected-recommendations" id="selectedRecommendations" style="display: none;">
                <h3>選択されたレコメンド</h3>
                <div class="selected-list" id="selectedList">
                    <!-- 選択されたレコメンドがここに表示される -->
                </div>
                <div class="selected-actions">
                    <button class="btn btn-primary" onclick="createPlan()">
                        <i class="fas fa-calendar-plus"></i>
                        プランを作成
                    </button>
                    <button class="btn btn-outline" onclick="shareRecommendations()">
                        <i class="fas fa-share"></i>
                        共有
                    </button>
                </div>
            </div>
        </div>
    </main>

    <script src="../../js/common.js"></script>
    <script src="../../js/navigation.js"></script>
    <script>
        let selectedRecommendations = [];
        let currentCategory = 'all';
        
        document.addEventListener('DOMContentLoaded', function() {
            initializeRecommendations();
        });
        
        function initializeRecommendations() {
            // レコメンドの初期化
            loadRecommendations();
        }
        
        function loadRecommendations() {
            // 実際の実装ではAPIからレコメンドデータを取得
            console.log('レコメンドデータを読み込みました');
        }
        
        function showCategory(category) {
            currentCategory = category;
            
            // タブの状態更新
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // レコメンドセクションの表示/非表示
            document.querySelectorAll('.recommendation-section').forEach(section => {
                if (category === 'all' || section.dataset.category === category) {
                    section.style.display = 'block';
                } else {
                    section.style.display = 'none';
                }
            });
        }
        
        function selectRecommendation(recommendationId) {
            if (!selectedRecommendations.includes(recommendationId)) {
                selectedRecommendations.push(recommendationId);
                updateSelectedRecommendations();
                showSuccess('レコメンドを選択しました');
            }
        }
        
        function updateSelectedRecommendations() {
            const selectedContainer = document.getElementById('selectedRecommendations');
            const selectedList = document.getElementById('selectedList');
            
            if (selectedRecommendations.length > 0) {
                selectedContainer.style.display = 'block';
                
                // 選択されたレコメンドのリストを更新
                selectedList.innerHTML = selectedRecommendations.map(id => {
                    return `
                        <div class="selected-item">
                            <span>レコメンド ${id}</span>
                            <button class="btn btn-sm btn-outline" onclick="removeRecommendation(${id})">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    `;
                }).join('');
            } else {
                selectedContainer.style.display = 'none';
            }
        }
        
        function removeRecommendation(recommendationId) {
            selectedRecommendations = selectedRecommendations.filter(id => id !== recommendationId);
            updateSelectedRecommendations();
        }
        
        function viewDetails(recommendationId) {
            showInfo(`レコメンド ${recommendationId} の詳細を表示します`);
        }
        
        function createPlan() {
            if (selectedRecommendations.length > 0) {
                showSuccess('プランを作成しました');
                setTimeout(() => {
                    window.location.href = '../uc001/UC001-001.html';
                }, 1000);
            } else {
                showWarning('レコメンドを選択してください');
            }
        }
        
        function shareRecommendations() {
            if (navigator.share) {
                navigator.share({
                    title: 'Memory Sparks レコメンド',
                    text: 'AIが提案する特別なレコメンドを共有します',
                    url: window.location.href
                });
            } else {
                navigator.clipboard.writeText(window.location.href);
                showSuccess('レコメンドのリンクをコピーしました');
            }
        }
    </script>
    
    <style>
        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-8);
        }
        
        .page-title {
            font-size: var(--text-3xl);
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: var(--space-2);
        }
        
        .page-subtitle {
            color: var(--text-secondary);
            font-size: var(--text-lg);
        }
        
        .recommendations-overview {
            background-color: var(--white);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-md);
            padding: var(--space-8);
            margin-bottom: var(--space-8);
        }
        
        .overview-header {
            text-align: center;
            margin-bottom: var(--space-6);
        }
        
        .overview-header h2 {
            font-size: var(--text-2xl);
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--space-2);
        }
        
        .overview-header p {
            color: var(--text-secondary);
        }
        
        .overview-stats {
            display: flex;
            justify-content: center;
            gap: var(--space-8);
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-value {
            font-size: var(--text-3xl);
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: var(--space-1);
        }
        
        .stat-label {
            font-size: var(--text-sm);
            color: var(--text-secondary);
        }
        
        .recommendations-categories {
            margin-bottom: var(--space-8);
        }
        
        .category-tabs {
            display: flex;
            gap: var(--space-2);
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .tab-btn {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            padding: var(--space-3) var(--space-4);
            border: 2px solid var(--border-light);
            border-radius: var(--radius-lg);
            background-color: var(--white);
            color: var(--text-secondary);
            cursor: pointer;
            transition: all var(--transition-fast);
            font-weight: 500;
        }
        
        .tab-btn:hover {
            border-color: var(--primary-color);
            color: var(--primary-color);
        }
        
        .tab-btn.active {
            border-color: var(--primary-color);
            background-color: var(--primary-color);
            color: var(--white);
        }
        
        .recommendations-container {
            display: flex;
            flex-direction: column;
            gap: var(--space-8);
        }
        
        .recommendation-section {
            background-color: var(--white);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-md);
            padding: var(--space-8);
        }
        
        .section-header {
            margin-bottom: var(--space-6);
        }
        
        .section-header h3 {
            font-size: var(--text-2xl);
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--space-2);
        }
        
        .section-header p {
            color: var(--text-secondary);
        }
        
        .recommendations-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: var(--space-6);
        }
        
        .recommendation-card {
            background-color: var(--white);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            overflow: hidden;
            transition: transform var(--transition-fast);
        }
        
        .recommendation-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        .card-image {
            position: relative;
            height: 200px;
            background: linear-gradient(135deg, var(--gray-200), var(--gray-300));
        }
        
        .card-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .card-badge {
            position: absolute;
            top: var(--space-3);
            right: var(--space-3);
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: var(--white);
            padding: var(--space-1) var(--space-3);
            border-radius: var(--radius-full);
            font-size: var(--text-sm);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: var(--space-1);
        }
        
        .card-content {
            padding: var(--space-4);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: var(--space-3);
        }
        
        .card-header h4 {
            font-size: var(--text-lg);
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .match-score {
            display: flex;
            align-items: center;
            gap: var(--space-1);
            color: var(--accent-color);
            font-weight: 600;
        }
        
        .card-description {
            margin-bottom: var(--space-4);
        }
        
        .card-description p {
            color: var(--text-secondary);
            line-height: 1.6;
        }
        
        .card-reason {
            background-color: var(--gray-50);
            padding: var(--space-3);
            border-radius: var(--radius-md);
            margin-bottom: var(--space-4);
        }
        
        .card-reason h5 {
            font-size: var(--text-sm);
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--space-1);
        }
        
        .card-reason p {
            color: var(--text-secondary);
            font-size: var(--text-sm);
            line-height: 1.5;
        }
        
        .card-tags {
            display: flex;
            gap: var(--space-2);
            margin-bottom: var(--space-4);
            flex-wrap: wrap;
        }
        
        .tag {
            background-color: var(--gray-100);
            color: var(--text-secondary);
            padding: var(--space-1) var(--space-2);
            border-radius: var(--radius-full);
            font-size: var(--text-xs);
            font-weight: 500;
        }
        
        .card-actions {
            display: flex;
            gap: var(--space-2);
        }
        
        .btn-outline {
            background-color: transparent;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
        }
        
        .btn-outline:hover {
            background-color: var(--primary-color);
            color: var(--white);
        }
        
        .selected-recommendations {
            background-color: var(--white);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-md);
            padding: var(--space-8);
            margin-top: var(--space-8);
        }
        
        .selected-recommendations h3 {
            font-size: var(--text-xl);
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--space-4);
        }
        
        .selected-list {
            display: flex;
            flex-direction: column;
            gap: var(--space-3);
            margin-bottom: var(--space-6);
        }
        
        .selected-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-3);
            background-color: var(--gray-50);
            border-radius: var(--radius-lg);
        }
        
        .selected-actions {
            display: flex;
            gap: var(--space-3);
            justify-content: center;
        }
        
        @media (max-width: 768px) {
            .page-header {
                flex-direction: column;
                align-items: flex-start;
                gap: var(--space-4);
            }
            
            .overview-stats {
                flex-direction: column;
                gap: var(--space-4);
            }
            
            .category-tabs {
                flex-direction: column;
            }
            
            .recommendations-grid {
                grid-template-columns: 1fr;
            }
            
            .card-actions {
                flex-direction: column;
            }
            
            .selected-actions {
                flex-direction: column;
            }
        }
    </style>
</body>
</html>
