<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>プランカスタマイズ - CouplePlan</title>
    <link rel="stylesheet" href="../../css/common.css">
    <link rel="stylesheet" href="../../css/components.css">
    <link rel="stylesheet" href="../../css/responsive.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- ナビゲーションバー -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-heart"></i>
                <span>CouplePlan</span>
            </div>
            <div class="nav-menu" id="nav-menu">
                <a href="../auth/AUTH-001.html" class="nav-link">ログイン</a>
                <a href="../common/COMMON-001.html" class="nav-link">ダッシュボード</a>
                <a href="../uc003/UC003-001.html" class="nav-link">ポータル</a>
            </div>
            <div class="nav-toggle" id="nav-toggle">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <!-- メインコンテンツ -->
    <main class="main-content">
        <div class="container">
            <!-- ヘッダー -->
            <div class="page-header">
                <div class="header-content">
                    <h1 class="page-title">プランカスタマイズ</h1>
                    <p class="page-subtitle">AIが生成したプランをあなたたち好みに調整しましょう</p>
                </div>
                <div class="header-actions">
                    <button class="btn btn-secondary" onclick="goBack()">
                        <i class="fas fa-arrow-left"></i>
                        戻る
                    </button>
                </div>
            </div>

            <!-- プラン概要 -->
            <div class="plan-overview">
                <div class="overview-header">
                    <h2>東京タワーロマンチックデート</h2>
                    <div class="plan-meta">
                        <span class="plan-date">2025年1月25日 14:00〜</span>
                        <span class="plan-duration">6時間</span>
                        <span class="plan-budget">¥15,000</span>
                    </div>
                </div>
                <div class="overview-status">
                    <span class="status-badge customizing">カスタマイズ中</span>
                </div>
            </div>

            <!-- カスタマイズセクション -->
            <div class="customize-sections">
                <!-- スケジュール調整 -->
                <div class="customize-section">
                    <div class="section-header">
                        <h3>スケジュール調整</h3>
                        <p>時間や順序を自由に変更できます</p>
                    </div>
                    
                    <div class="schedule-timeline">
                        <div class="timeline-item">
                            <div class="timeline-time">14:00</div>
                            <div class="timeline-content">
                                <div class="timeline-title">東京タワー到着</div>
                                <div class="timeline-description">展望台で東京の景色を楽しむ</div>
                                <div class="timeline-duration">1時間</div>
                            </div>
                            <div class="timeline-actions">
                                <button class="btn btn-sm btn-outline" onclick="editTimelineItem(1)">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn-sm btn-outline" onclick="moveTimelineItem(1, 'up')">
                                    <i class="fas fa-arrow-up"></i>
                                </button>
                                <button class="btn btn-sm btn-outline" onclick="moveTimelineItem(1, 'down')">
                                    <i class="fas fa-arrow-down"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="timeline-item">
                            <div class="timeline-time">15:00</div>
                            <div class="timeline-content">
                                <div class="timeline-title">カフェタイム</div>
                                <div class="timeline-description">タワー内のカフェで休憩</div>
                                <div class="timeline-duration">30分</div>
                            </div>
                            <div class="timeline-actions">
                                <button class="btn btn-sm btn-outline" onclick="editTimelineItem(2)">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn-sm btn-outline" onclick="moveTimelineItem(2, 'up')">
                                    <i class="fas fa-arrow-up"></i>
                                </button>
                                <button class="btn btn-sm btn-outline" onclick="moveTimelineItem(2, 'down')">
                                    <i class="fas fa-arrow-down"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="timeline-item">
                            <div class="timeline-time">15:30</div>
                            <div class="timeline-content">
                                <div class="timeline-title">芝公園散歩</div>
                                <div class="timeline-description">緑豊かな公園でゆっくり散歩</div>
                                <div class="timeline-duration">1時間</div>
                            </div>
                            <div class="timeline-actions">
                                <button class="btn btn-sm btn-outline" onclick="editTimelineItem(3)">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn-sm btn-outline" onclick="moveTimelineItem(3, 'up')">
                                    <i class="fas fa-arrow-up"></i>
                                </button>
                                <button class="btn btn-sm btn-outline" onclick="moveTimelineItem(3, 'down')">
                                    <i class="fas fa-arrow-down"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="timeline-item">
                            <div class="timeline-time">16:30</div>
                            <div class="timeline-content">
                                <div class="timeline-title">ディナー</div>
                                <div class="timeline-description">レストランでロマンチックなディナー</div>
                                <div class="timeline-duration">2時間</div>
                            </div>
                            <div class="timeline-actions">
                                <button class="btn btn-sm btn-outline" onclick="editTimelineItem(4)">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn-sm btn-outline" onclick="moveTimelineItem(4, 'up')">
                                    <i class="fas fa-arrow-up"></i>
                                </button>
                                <button class="btn btn-sm btn-outline" onclick="moveTimelineItem(4, 'down')">
                                    <i class="fas fa-arrow-down"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="timeline-actions">
                        <button class="btn btn-outline" onclick="addTimelineItem()">
                            <i class="fas fa-plus"></i>
                            項目を追加
                        </button>
                    </div>
                </div>

                <!-- 予算調整 -->
                <div class="customize-section">
                    <div class="section-header">
                        <h3>予算調整</h3>
                        <p>予算に応じてプランを最適化します</p>
                    </div>
                    
                    <div class="budget-controls">
                        <div class="budget-slider">
                            <label for="budgetRange" class="form-label">予算設定</label>
                            <input type="range" id="budgetRange" min="5000" max="50000" value="15000" step="1000" oninput="updateBudget(this.value)">
                            <div class="budget-display">
                                <span id="budgetValue">¥15,000</span>
                            </div>
                        </div>
                        
                        <div class="budget-breakdown">
                            <h4>予算内訳</h4>
                            <div class="breakdown-item">
                                <span class="breakdown-label">東京タワー入場料</span>
                                <span class="breakdown-amount">¥2,000</span>
                            </div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">カフェ</span>
                                <span class="breakdown-amount">¥1,500</span>
                            </div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">ディナー</span>
                                <span class="breakdown-amount">¥10,000</span>
                            </div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">交通費</span>
                                <span class="breakdown-amount">¥1,500</span>
                            </div>
                            <div class="breakdown-total">
                                <span class="breakdown-label">合計</span>
                                <span class="breakdown-amount">¥15,000</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 場所・店舗選択 -->
                <div class="customize-section">
                    <div class="section-header">
                        <h3>場所・店舗選択</h3>
                        <p>お気に入りの場所に変更できます</p>
                    </div>
                    
                    <div class="location-options">
                        <div class="location-category">
                            <h4>ディナー</h4>
                            <div class="location-grid">
                                <div class="location-card selected">
                                    <div class="location-image">
                                        <img src="../../assets/images/restaurant1.jpg" alt="レストラン" onerror="this.style.display='none'">
                                    </div>
                                    <div class="location-info">
                                        <h5>レストラン A</h5>
                                        <p>フレンチ料理</p>
                                        <div class="location-meta">
                                            <span class="price">¥8,000〜</span>
                                            <span class="rating">★4.5</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="location-card">
                                    <div class="location-image">
                                        <img src="../../assets/images/restaurant2.jpg" alt="レストラン" onerror="this.style.display='none'">
                                    </div>
                                    <div class="location-info">
                                        <h5>レストラン B</h5>
                                        <p>イタリアン</p>
                                        <div class="location-meta">
                                            <span class="price">¥6,000〜</span>
                                            <span class="rating">★4.3</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="location-card">
                                    <div class="location-image">
                                        <img src="../../assets/images/restaurant3.jpg" alt="レストラン" onerror="this.style.display='none'">
                                    </div>
                                    <div class="location-info">
                                        <h5>レストラン C</h5>
                                        <p>和食</p>
                                        <div class="location-meta">
                                            <span class="price">¥5,000〜</span>
                                            <span class="rating">★4.7</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="location-category">
                            <h4>カフェ</h4>
                            <div class="location-grid">
                                <div class="location-card selected">
                                    <div class="location-image">
                                        <img src="../../assets/images/cafe1.jpg" alt="カフェ" onerror="this.style.display='none'">
                                    </div>
                                    <div class="location-info">
                                        <h5>カフェ A</h5>
                                        <p>コーヒー専門店</p>
                                        <div class="location-meta">
                                            <span class="price">¥800〜</span>
                                            <span class="rating">★4.2</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="location-card">
                                    <div class="location-image">
                                        <img src="../../assets/images/cafe2.jpg" alt="カフェ" onerror="this.style.display='none'">
                                    </div>
                                    <div class="location-info">
                                        <h5>カフェ B</h5>
                                        <p>スイーツ専門</p>
                                        <div class="location-meta">
                                            <span class="price">¥1,200〜</span>
                                            <span class="rating">★4.5</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 特別な要望 -->
                <div class="customize-section">
                    <div class="section-header">
                        <h3>特別な要望</h3>
                        <p>追加の要望や制約を設定できます</p>
                    </div>
                    
                    <div class="special-requests">
                        <div class="request-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="requests" value="surprise">
                                <span class="checkmark"></span>
                                サプライズ要素を追加
                            </label>
                        </div>
                        
                        <div class="request-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="requests" value="photo">
                                <span class="checkmark"></span>
                                写真撮影スポットを重視
                            </label>
                        </div>
                        
                        <div class="request-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="requests" value="quiet">
                                <span class="checkmark"></span>
                                静かな場所を希望
                            </label>
                        </div>
                        
                        <div class="request-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="requests" value="accessibility">
                                <span class="checkmark"></span>
                                バリアフリー対応
                            </label>
                        </div>
                        
                        <div class="form-group">
                            <label for="customRequest" class="form-label">その他の要望</label>
                            <textarea id="customRequest" name="customRequest" class="form-textarea" placeholder="特別な要望があれば記入してください"></textarea>
                        </div>
                    </div>
                </div>
            </div>

            <!-- アクションボタン -->
            <div class="action-buttons">
                <button class="btn btn-secondary" onclick="previewPlan()">
                    <i class="fas fa-eye"></i>
                    プレビュー
                </button>
                <button class="btn btn-primary" onclick="savePlan()">
                    <i class="fas fa-save"></i>
                    プランを保存
                </button>
                <button class="btn btn-primary" onclick="startCollaboration()">
                    <i class="fas fa-users"></i>
                    共同編集を開始
                </button>
            </div>
        </div>
    </main>

    <script src="../../js/common.js"></script>
    <script src="../../js/navigation.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            initializeCustomize();
        });
        
        function initializeCustomize() {
            // カスタマイズ画面の初期化
            setupLocationSelection();
            setupTimelineDragDrop();
        }
        
        function setupLocationSelection() {
            // 場所選択の設定
            document.querySelectorAll('.location-card').forEach(card => {
                card.addEventListener('click', function() {
                    // 同じカテゴリの他のカードの選択を解除
                    const category = this.closest('.location-category');
                    category.querySelectorAll('.location-card').forEach(c => {
                        c.classList.remove('selected');
                    });
                    
                    // このカードを選択
                    this.classList.add('selected');
                });
            });
        }
        
        function setupTimelineDragDrop() {
            // タイムラインのドラッグ&ドロップ設定
            console.log('タイムラインのドラッグ&ドロップを設定しました');
        }
        
        function updateBudget(value) {
            document.getElementById('budgetValue').textContent = '¥' + parseInt(value).toLocaleString();
            // 予算に応じてプランを再計算
            recalculatePlan(parseInt(value));
        }
        
        function recalculatePlan(budget) {
            // 予算に応じてプランを再計算
            console.log('予算に応じてプランを再計算:', budget);
        }
        
        function editTimelineItem(itemId) {
            showInfo(`タイムライン項目 ${itemId} を編集します`);
        }
        
        function moveTimelineItem(itemId, direction) {
            showInfo(`タイムライン項目 ${itemId} を${direction === 'up' ? '上' : '下'}に移動します`);
        }
        
        function addTimelineItem() {
            showInfo('新しいタイムライン項目を追加します');
        }
        
        function previewPlan() {
            showInfo('プランのプレビューを表示します');
        }
        
        function savePlan() {
            showInfo('プランを保存しています...');
            setTimeout(() => {
                showSuccess('プランが保存されました');
            }, 1000);
        }
        
        function startCollaboration() {
            showInfo('共同編集を開始します');
            setTimeout(() => {
                window.location.href = '../uc002/UC002-001.html';
            }, 1000);
        }
    </script>
    
    <style>
        .plan-overview {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: var(--white);
            border-radius: var(--radius-xl);
            padding: var(--space-8);
            margin-bottom: var(--space-8);
        }
        
        .overview-header h2 {
            font-size: var(--text-2xl);
            font-weight: 700;
            margin-bottom: var(--space-4);
        }
        
        .plan-meta {
            display: flex;
            gap: var(--space-6);
            margin-bottom: var(--space-4);
        }
        
        .plan-meta span {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            font-size: var(--text-sm);
            opacity: 0.9;
        }
        
        .overview-status {
            display: flex;
            justify-content: flex-end;
        }
        
        .status-badge.customizing {
            background-color: rgba(255, 255, 255, 0.2);
            color: var(--white);
            padding: var(--space-2) var(--space-4);
            border-radius: var(--radius-full);
            font-size: var(--text-sm);
            font-weight: 500;
        }
        
        .customize-sections {
            display: flex;
            flex-direction: column;
            gap: var(--space-8);
            margin-bottom: var(--space-8);
        }
        
        .customize-section {
            background-color: var(--white);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-md);
            padding: var(--space-8);
        }
        
        .section-header h3 {
            font-size: var(--text-xl);
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--space-2);
        }
        
        .section-header p {
            color: var(--text-secondary);
        }
        
        .schedule-timeline {
            margin-bottom: var(--space-6);
        }
        
        .timeline-item {
            display: flex;
            align-items: center;
            gap: var(--space-4);
            padding: var(--space-4);
            border: 2px solid var(--border-light);
            border-radius: var(--radius-lg);
            margin-bottom: var(--space-3);
            transition: all var(--transition-fast);
        }
        
        .timeline-item:hover {
            border-color: var(--primary-color);
            background-color: var(--gray-50);
        }
        
        .timeline-time {
            min-width: 80px;
            font-weight: 600;
            color: var(--primary-color);
            font-size: var(--text-lg);
        }
        
        .timeline-content {
            flex: 1;
        }
        
        .timeline-title {
            font-size: var(--text-lg);
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--space-1);
        }
        
        .timeline-description {
            color: var(--text-secondary);
            margin-bottom: var(--space-1);
        }
        
        .timeline-duration {
            color: var(--text-secondary);
            font-size: var(--text-sm);
        }
        
        .timeline-actions {
            display: flex;
            gap: var(--space-2);
        }
        
        .timeline-actions .btn {
            padding: var(--space-2);
            min-width: 40px;
        }
        
        .budget-controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-8);
        }
        
        .budget-slider {
            display: flex;
            flex-direction: column;
            gap: var(--space-4);
        }
        
        .budget-slider input[type="range"] {
            width: 100%;
        }
        
        .budget-display {
            text-align: center;
            font-size: var(--text-xl);
            font-weight: 600;
            color: var(--primary-color);
        }
        
        .budget-breakdown {
            background-color: var(--gray-50);
            border-radius: var(--radius-lg);
            padding: var(--space-6);
        }
        
        .budget-breakdown h4 {
            font-size: var(--text-lg);
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--space-4);
        }
        
        .breakdown-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-2) 0;
            border-bottom: 1px solid var(--border-light);
        }
        
        .breakdown-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-3) 0;
            font-weight: 600;
            color: var(--primary-color);
            border-top: 2px solid var(--primary-color);
            margin-top: var(--space-2);
        }
        
        .location-options {
            display: flex;
            flex-direction: column;
            gap: var(--space-8);
        }
        
        .location-category h4 {
            font-size: var(--text-lg);
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--space-4);
        }
        
        .location-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-4);
        }
        
        .location-card {
            border: 2px solid var(--border-light);
            border-radius: var(--radius-lg);
            overflow: hidden;
            cursor: pointer;
            transition: all var(--transition-fast);
        }
        
        .location-card:hover {
            border-color: var(--primary-color);
            transform: translateY(-2px);
        }
        
        .location-card.selected {
            border-color: var(--primary-color);
            background-color: rgba(255, 107, 107, 0.05);
        }
        
        .location-image {
            height: 120px;
            background: linear-gradient(135deg, var(--gray-200), var(--gray-300));
        }
        
        .location-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .location-info {
            padding: var(--space-4);
        }
        
        .location-info h5 {
            font-size: var(--text-base);
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--space-1);
        }
        
        .location-info p {
            color: var(--text-secondary);
            font-size: var(--text-sm);
            margin-bottom: var(--space-2);
        }
        
        .location-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .price {
            color: var(--primary-color);
            font-weight: 600;
            font-size: var(--text-sm);
        }
        
        .rating {
            color: var(--text-secondary);
            font-size: var(--text-sm);
        }
        
        .special-requests {
            display: flex;
            flex-direction: column;
            gap: var(--space-4);
        }
        
        .request-group {
            display: flex;
            align-items: center;
        }
        
        .checkbox-label {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            cursor: pointer;
        }
        
        .checkbox-label input[type="checkbox"] {
            display: none;
        }
        
        .checkmark {
            width: 18px;
            height: 18px;
            border: 2px solid var(--border-light);
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition-fast);
        }
        
        .checkbox-label input[type="checkbox"]:checked + .checkmark {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .checkbox-label input[type="checkbox"]:checked + .checkmark::after {
            content: '✓';
            color: var(--white);
            font-size: var(--text-xs);
        }
        
        .action-buttons {
            display: flex;
            gap: var(--space-4);
            justify-content: center;
            flex-wrap: wrap;
        }
        
        @media (max-width: 768px) {
            .budget-controls {
                grid-template-columns: 1fr;
            }
            
            .location-grid {
                grid-template-columns: 1fr;
            }
            
            .timeline-item {
                flex-direction: column;
                align-items: flex-start;
                gap: var(--space-2);
            }
            
            .timeline-actions {
                align-self: flex-end;
            }
            
            .action-buttons {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</body>
</html>
