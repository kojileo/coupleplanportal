# UC007-005: サブスクリプション管理画面 実装指示書

## 1. 画面概要
- ステータス: プロト完了 (実装予定)
- ゴール:
  - 契約プランの変更・キャンセルを安全に行う
  - 支払い方法や請求履歴を一元管理する

## 2. 主なセクション
- 現在のプラン情報
- 支払い方法管理
- 請求履歴一覧
- キャンセル / プラン変更手続き

## 3. UIメモ
- ベーススタイルは `css/common.css` / `css/components.css` に準拠
- モバイルビューは `css/responsive.css` のブレークポイント (max-width: 768px) を利用
- 遷移には `js/navigation.js` の `navigateTo`/`goBack` を活用

## 4. 操作と遷移
| 要素 | 遷移/動作 | 備考 |
|------|-----------|------|
| プラン変更 | POST /subscriptions/change | 確認モーダル付き |
| キャンセル | POST /subscriptions/cancel | 理由入力必須 |
| 支払い方法追加 | POST /payment-methods | Stripe SetupIntent を利用 |

## 5. API / データ連携
- **GET /api/v1/subscriptions**: 契約情報取得
- **POST /api/v1/subscriptions/change**: プラン変更
- **POST /api/v1/subscriptions/cancel**: キャンセル申請

## 6. テスト観点
- キャンセル手続きがクールダウン期間を考慮する
- 支払い方法追加で 3DS フローを誘導する

## 7. 実装メモ
- Stripe Billing API への連携を前提
- キャンセル後の復帰フロー (Winback) を別途定義

