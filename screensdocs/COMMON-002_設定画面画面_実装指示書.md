# COMMON-002: 設定画面 実装指示書

## 1. 画面概要
- ステータス: プロト完了 (実装予定)
- ゴール:
  - アカウント情報・セキュリティ・通知設定を一括管理する
  - プライバシーや公開範囲をユーザー自身で制御できる
  - パートナー連携やデータエクスポートなどの重要操作を提供する

## 2. 主なセクション
- アカウント設定（プロフィール・セキュリティ・通知）
- プライバシー設定（公開範囲・活動履歴・トラッキング）
- パートナー設定（承認・ブロック・連携解除）
- アプリ設定（テーマ・言語・通知音）
- データ管理（エクスポート、バックアップ、削除）
- 危険操作ゾーン（アカウント停止/削除）

## 3. UIメモ
- ベーススタイルは `css/common.css` / `css/components.css` に準拠
- モバイルビューは `css/responsive.css` のブレークポイント (max-width: 768px) を利用
- 遷移には `js/navigation.js` の `navigateTo`/`goBack` を活用

## 4. 操作と遷移
| 要素 | 遷移/動作 | 備考 |
|------|-----------|------|
| 戻るボタン | history.back() | 直前画面へ戻る |
| セクション内の編集ボタン | 対応するモーダル/フォームを開く | 保存時はトースト表示 |
| アカウント削除ボタン | confirm → API呼び出し | 二重確認が必要 |

## 5. API / データ連携
- **GET /api/v1/settings**: 設定値の初期読込
- **PUT /api/v1/settings/profile**: プロフィール更新
- **PUT /api/v1/settings/privacy**: プライバシー設定更新
- **POST /api/v1/settings/export**: エクスポートリクエスト
- **DELETE /api/v1/users/{userId}**: アカウント削除

## 6. テスト観点
- 各セクションの保存時にトーストが表示される
- 二段階認証トグル時に確認モーダルが出る
- 危険操作ゾーンはスクロール末尾で明示的に表示される

## 7. 実装メモ
- セキュリティ関連操作は常に多要素認証を要求する
- データエクスポートは非同期で進捗をCOMMON-004へ通知する
- アカウント削除は 72 時間の猶予期間を持たせる

