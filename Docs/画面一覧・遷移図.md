# CouplePlan 画面一覧・遷移図

## 概要

CouplePlanプラットフォームの7つのユースケース（UC-001〜UC-007）を分析し、ユーザーが利用する画面の一覧と画面遷移図を作成しました。各画面はユーザー中心設計（UCD）の原則に基づき、直感的で美しいUX/UIを提供します。

## 1. 画面一覧（Screen List）

### 認証・初期設定系
| screen_id | screen_name | description | function_type |
|-----------|-------------|-------------|---------------|
| AUTH-001 | ログイン・アカウント作成画面 | ユーザー認証とアカウント作成 | 認証画面 |
| AUTH-002 | プロフィール設定画面 | ユーザープロフィールと好み設定 | 入力フォーム |
| AUTH-003 | プライバシー設定画面 | データ利用とプライバシー設定 | 設定画面 |
| AUTH-004 | パートナー連携設定画面 | パートナーとの連携設定（オプション） | 設定画面 |

### UC-001: AIデートプラン提案・生成
| screen_id | screen_name | description | function_type |
|-----------|-------------|-------------|---------------|
| UC001-001 | デートプラン作成画面 | デートの基本要件入力（予算、時間、地域、好み） | 入力フォーム |
| UC001-002 | AI生成中画面 | プラン生成の進捗表示 | ローディング画面 |
| UC001-003 | プラン提案画面 | 生成されたデートプラン候補の表示 | 一覧・選択画面 |
| UC001-004 | プラン詳細画面 | 選択したプランの詳細情報表示 | 詳細表示画面 |
| UC001-005 | カスタマイズ画面 | プランの詳細調整とカスタマイズ | 編集画面 |

### UC-002: カップル共同デートプラン編集
| screen_id | screen_name | description | function_type |
|-----------|-------------|---------------|
| UC002-001 | 共同編集画面 | リアルタイムでのプラン共同編集 | 協働編集画面 |
| UC002-002 | 編集競合解決画面 | 同時編集による競合の解決 | 競合解決画面 |
| UC002-003 | 編集履歴画面 | 編集履歴の確認と復元 | 履歴表示画面 |
| UC002-004 | プレビュー画面 | 編集内容のリアルタイムプレビュー | プレビュー画面 |
| UC002-005 | 編集完了確認画面 | プラン完成の確認と次ステップへの遷移 | 確認画面 |

### UC-003: ポータル起点統合プラットフォーム
| screen_id | screen_name | description | function_type |
|-----------|-------------|-------------|---------------|
| UC003-001 | ポータルトップ画面 | デート情報ポータルのメインページ | ランディング画面 |
| UC003-002 | デート情報検索画面 | デートスポット・アイデアの検索 | 検索画面 |
| UC003-003 | 記事詳細画面 | デート情報記事の詳細表示 | 詳細表示画面 |
| UC003-004 | アプリ誘導画面 | ポータルからアプリへの誘導 | 誘導画面 |
| UC003-005 | 統合体験画面 | ポータルとアプリの統合体験 | 統合画面 |

### UC-004: AI喧嘩仲裁・関係修復システム
| screen_id | screen_name | description | function_type |
|-----------|-------------|-------------|---------------|
| UC004-001 | 仲裁依頼画面 | 対立・喧嘩の仲裁依頼 | 入力フォーム |
| UC004-002 | 状況分析画面 | 対立状況の分析結果表示 | 分析結果画面 |
| UC004-003 | 仲裁提案画面 | AIによる仲裁提案の表示 | 提案画面 |
| UC004-004 | 関係修復プラン画面 | 関係修復のための具体的プラン | プラン表示画面 |
| UC004-005 | 進捗追跡画面 | 仲裁・修復の進捗状況 | 進捗表示画面 |



### UC-007: 段階的マネタイズ制御
| screen_id | screen_name | description | function_type |
|-----------|-------------|-------------|---------------|
| UC007-001 | 課金管理画面 | 現在の課金状況とプラン表示 | 管理画面 |
| UC007-002 | 機能解放画面 | 段階的な機能解放の表示 | 機能表示画面 |
| UC007-003 | 課金変更通知画面 | 課金体系変更の通知 | 通知画面 |
| UC007-004 | 課金履歴画面 | 課金履歴の確認 | 履歴表示画面 |
| UC007-005 | サブスクリプション画面 | サブスクリプション管理 | 管理画面 |

### 共通・システム系
| screen_id | screen_name | description | function_type |
|-----------|-------------|-------------|---------------|
| COMMON-001 | ダッシュボード画面 | アプリのメインダッシュボード | ダッシュボード |
| COMMON-002 | 設定画面 | アプリ全体の設定 | 設定画面 |
| COMMON-003 | ヘルプ画面 | ヘルプ・サポート情報 | ヘルプ画面 |
| COMMON-004 | エラー画面 | システムエラーの表示 | エラー画面 |
| COMMON-005 | オフライン画面 | オフライン状態の表示 | 状態表示画面 |

## 2. 画面遷移図（Screen Transition Diagram）

### メインフロー（新規ユーザー）
```
[アプリ起動]
    ↓
[AUTH-001: ログイン・アカウント作成画面] 
    ↓ (アカウント作成)
[AUTH-002: プロフィール設定画面] 
    ↓
[AUTH-003: プライバシー設定画面] 
    ↓
[COMMON-001: ダッシュボード画面]
```

### パートナー連携フロー（オプション）
```
[COMMON-001: ダッシュボード画面]
    ↓ (パートナー連携を選択)
[AUTH-004: パートナー連携設定画面]
    ↓ (連携完了)
[COMMON-001: ダッシュボード画面] (カップル機能解放)
```

### UC-001: AIデートプラン提案・生成フロー
```
[COMMON-001: ダッシュボード画面]
    ↓
[UC001-001: デートプラン作成画面]
    ↓
[UC001-002: AI生成中画面]
    ↓
[UC001-003: プラン提案画面]
    ↓
[UC001-004: プラン詳細画面]
    ↓
[UC001-005: カスタマイズ画面]
    ↓
[UC002-001: 共同編集画面] (UC-002へ)
```

### UC-002: カップル共同デートプラン編集フロー
```
[UC001-005: カスタマイズ画面] (UC-001から)
    ↓
[UC002-001: 共同編集画面]
    ↓
[UC002-002: 編集競合解決画面] (競合時)
    ↓
[UC002-003: 編集履歴画面] (履歴確認時)
    ↓
[UC002-004: プレビュー画面]
    ↓
[UC002-005: 編集完了確認画面]
    ↓
[COMMON-001: ダッシュボード画面]
```

### UC-003: ポータル起点統合プラットフォームフロー
```
[UC003-001: ポータルトップ画面]
    ↓
[UC003-002: デート情報検索画面]
    ↓
[UC003-003: 記事詳細画面]
    ↓
[UC003-004: アプリ誘導画面]
    ↓
[UC003-005: 統合体験画面]
    ↓
[UC001-001: デートプラン作成画面] (UC-001へ)
```

### UC-004: AI喧嘩仲裁・関係修復システムフロー
```
[COMMON-001: ダッシュボード画面]
    ↓
[UC004-001: 仲裁依頼画面]
    ↓
[UC004-002: 状況分析画面]
    ↓
[UC004-003: 仲裁提案画面]
    ↓
[UC004-004: 関係修復プラン画面]
    ↓
[UC004-005: 進捗追跡画面]
    ↓
[UC001-001: デートプラン作成画面] (関係修復デート)
```

```


### UC-007: 段階的マネタイズ制御フロー
```
[COMMON-001: ダッシュボード画面]
    ↓
[UC007-001: 課金管理画面]
    ↓
[UC007-002: 機能解放画面]
    ↓
[UC007-003: 課金変更通知画面] (変更時)
    ↓
[UC007-004: 課金履歴画面]
    ↓
[UC007-005: サブスクリプション画面]
    ↓
[COMMON-001: ダッシュボード画面]
```

### エラーハンドリング・例外フロー
```
[各画面] 
    ↓ (エラー発生時)
[COMMON-004: エラー画面]
    ↓
[COMMON-001: ダッシュボード画面] (復帰時)

[各画面]
    ↓ (オフライン時)
[COMMON-005: オフライン画面]
    ↓
[各画面] (オンライン復帰時)
```

### 設定・ヘルプフロー
```
[COMMON-001: ダッシュボード画面]
    ↓
[COMMON-002: 設定画面]
    ↓
[AUTH-003: プライバシー設定画面] (プライバシー設定時)
    ↓
[COMMON-001: ダッシュボード画面]

[COMMON-001: ダッシュボード画面]
    ↓
[AUTH-004: パートナー連携設定画面] (パートナー連携時)
    ↓
[COMMON-001: ダッシュボード画面]

[COMMON-001: ダッシュボード画面]
    ↓
[COMMON-003: ヘルプ画面]
    ↓
[COMMON-001: ダッシュボード画面]
```

## 3. 画面詳細仕様

### AUTH-004: パートナー連携設定画面の機能
**主要機能:**
- パートナーとの連携方法選択（QRコード、リンク、手動入力等）
- 連携状況の確認・管理
- 連携の解除・再設定
- パートナーの基本情報表示

**UI要素:**
- 連携方法の選択ボタン
- QRコード表示・読み取り機能
- 連携リンクの生成・共有
- 連携履歴の表示
- 連携完了時の確認画面

### パートナー連携フローの詳細
**連携設定（オプション）:**
1. ダッシュボードからパートナー連携を選択
2. 連携方法を選択（QRコード、リンク等）
3. パートナーとの連携完了
4. カップル機能が解放される

**連携なしでの利用:**
- 個人でもAIデートプラン生成、ポータル閲覧等の基本機能を利用可能
- カップル機能（共同編集等）は連携後に利用可能

### COMMON-001: ダッシュボード画面の機能
**主要機能:**
- 現在のデートプラン状況表示
- 最近のデート履歴
- 関係性スコアの表示（パートナー連携後）
- 通知・メッセージの確認
- 各機能へのクイックアクセス
- パートナー連携の案内（未連携時）

**UI要素:**
- カード形式での情報表示
- 進捗インジケーター
- ショートカットメニュー
- 通知バッジ
- プロフィール情報の表示
- パートナー連携案内カード（未連携時）

### UC003-001: ポータルトップ画面の機能
**主要機能:**
- デート情報・アイデアの閲覧
- 人気デートスポットの紹介
- 季節・イベント別のデート提案
- 検索機能
- アプリへの誘導

**UI要素:**
- 記事一覧表示
- カテゴリ別ナビゲーション
- 検索バー
- アプリダウンロード誘導バナー
- ソーシャルシェア機能

## 4. ポータルとダッシュボードの違い

### ポータル（UC003-001）の特徴
- **目的**: デート情報の収集・閲覧、新規ユーザーの獲得
- **対象**: 未登録ユーザー、登録済みユーザー両方
- **機能**: 情報提供、検索、アプリ誘導
- **アクセス**: Webブラウザから直接アクセス可能
- **コンテンツ**: 静的コンテンツ中心（記事、スポット情報等）

### ダッシュボード（COMMON-001）の特徴
- **目的**: アプリ機能へのアクセス、個人情報の管理
- **対象**: 登録済みカップルユーザーのみ
- **機能**: プラン管理、履歴確認、機能アクセス
- **アクセス**: アプリログイン後のメイン画面
- **コンテンツ**: 動的コンテンツ中心（個人データ、リアルタイム情報）

## 5. ポータルからの機能遷移イメージ

### ポータル → アプリ機能への遷移フロー
```
[UC003-001: ポータルトップ画面]
    ↓ (デートアイデアに興味)
[UC003-002: デート情報検索画面]
    ↓ (具体的なプランに興味)
[UC003-003: 記事詳細画面]
    ↓ (「このプランでデートする」ボタン)
[UC003-004: アプリ誘導画面]
    ↓ (アプリダウンロード or ログイン)
[AUTH-001: ログイン画面]
    ↓
[COMMON-001: ダッシュボード画面]
    ↓ (ポータル情報を引き継ぎ)
[UC001-001: デートプラン作成画面]
    ↓ (ポータル情報を自動入力)
[UC001-002: AI生成中画面]
    ↓
[UC001-003: プラン提案画面]
```

### ポータル情報の引き継ぎ
- **自動入力**: ポータルで閲覧したデートスポット情報をプラン作成画面に自動入力
- **コンテキスト保持**: ユーザーの興味・検索履歴をAIプラン生成に活用
- **シームレス体験**: ポータルからアプリへの遷移で情報の断絶を防止

## 6. エラーハンドリング

### 特定できたエラー画面
- **COMMON-004: エラー画面**: システムエラー、ネットワークエラー、認証エラー等の汎用エラー表示
- **COMMON-005: オフライン画面**: ネットワーク接続不良時のオフライン状態表示

### 画面遷移が曖昧な箇所
1. **UC-004の仲裁依頼画面への遷移**: ダッシュボードからの直接遷移か、特定の条件での自動表示かが不明
2. **UC-007の課金変更通知**: 通知の表示タイミングと画面遷移の詳細が不明
3. **競合解決画面の詳細フロー**: UC-002での編集競合発生時の具体的な解決プロセスが不明

### 注意事項
- 一部の画面遷移は、ユースケース文書から推測したものであり、実際の実装時には詳細な仕様確認が必要
- エラーハンドリングについては、各ユースケースで例外フローが定義されているが、具体的な画面設計は今後の詳細設計で確定
- モバイルアプリとWebアプリでの画面遷移の違いについては、プラットフォーム固有の設計が必要

## 7. 検証結果

### 主要成果物
- **画面一覧**: 34画面を特定し、各画面の機能と役割を明確化
- **画面遷移図**: 7つのユースケースに基づく主要フローとエラーハンドリングフローを図式化
- **シンプル化**: カップル招待を削除し、個人利用から段階的にカップル機能を解放する構成に変更

### エラーハンドリング内容
- 汎用エラー画面とオフライン画面を特定
- 3つの曖昧な遷移箇所を明記
- 今後の詳細設計で確定すべき項目を整理

### 設計の改善点
1. **ユーザー体験の向上**: 個人でも価値を感じられる機能から開始
2. **開発コストの削減**: 招待システムの複雑性を排除
3. **段階的な機能解放**: パートナー連携後にカップル機能を利用可能
4. **柔軟な利用形態**: 個人利用とカップル利用の両方に対応

### 次に進むべき作業
1. 曖昧な画面遷移の詳細仕様確定
2. モバイル・Webプラットフォーム固有の画面設計
3. アクセシビリティ要件の詳細化
4. レスポンシブデザインの具体的な仕様策定

---

**作成日**: 2025年1月27日  
**バージョン**: 1.0  
**作成者**: ソフトウェアエンジニア・UX/UIデザイナー  
**承認者**: [承認者名]  
**レビュー者**: [レビュー者名]
