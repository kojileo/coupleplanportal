# Supabase プラン分析: Free vs Pro

## CouplePlanの要件分析

### 1. データベース容量の見積もり

#### ユーザーデータ
- **プロフィール情報**: 1ユーザーあたり約1KB
- **認証データ**: Supabase Authで管理（容量に含まれない）

#### デートプランデータ
- **プラン基本情報**: 1プランあたり約2KB
- **AI生成コンテンツ**: 1プランあたり約10-50KB
- **共同編集履歴**: 1編集あたり約1KB

#### 仲裁・関係修復データ
- **仲裁依頼**: 1依頼あたり約5KB
- **AI分析結果**: 1分析あたり約20-100KB
- **改善プラン**: 1プランあたり約10-30KB

#### 課金データ
- **サブスクリプション情報**: 1ユーザーあたり約1KB
- **支払い履歴**: 1取引あたり約0.5KB

### 2. ストレージ容量の見積もり

#### プロフィール画像
- **アバター画像**: 1枚あたり約100-500KB
- **圧縮後**: 約50-200KB

#### デートプラン画像
- **プラン画像**: 1枚あたり約200KB-2MB
- **圧縮後**: 約100KB-500KB

#### Date Canvasファイル
- **Canvasデータ**: 1ファイルあたり約10-100KB
- **エクスポート画像**: 1枚あたり約500KB-2MB

### 3. リアルタイム使用量の見積もり

#### 共同編集
- **編集操作**: 1操作あたり約1-5KB
- **同時編集者**: 2人（カップル）
- **編集頻度**: 1セッションあたり10-50回

#### 通知
- **システム通知**: 1通知あたり約0.1KB
- **リアルタイム通知**: 1通知あたり約0.5KB

## Freeプランでの制限分析

### データベース容量: 500MB
| データタイプ | 1ユニット | 想定ユーザー数 | 総容量 |
|-------------|-----------|----------------|--------|
| プロフィール | 1KB | 1,000人 | 1MB |
| デートプラン | 30KB | 1,000プラン | 30MB |
| 仲裁データ | 50KB | 100依頼 | 5MB |
| 課金データ | 2KB | 1,000ユーザー | 2MB |
| **合計** | - | - | **約38MB** |

**結論**: 500MBの制限内で十分運用可能

### ストレージ容量: 1GB
| ファイルタイプ | 1ファイル | 想定数 | 総容量 |
|---------------|-----------|--------|--------|
| アバター画像 | 200KB | 1,000枚 | 200MB |
| プラン画像 | 300KB | 2,000枚 | 600MB |
| Canvasファイル | 50KB | 500ファイル | 25MB |
| **合計** | - | - | **約825MB** |

**結論**: 1GBの制限内で運用可能

### 月間アクティブユーザー: 50,000人
- **MVP段階**: 100-1,000人想定
- **成長段階**: 10,000人想定
- **結論**: 十分な余裕

### リアルタイム制限
- **月間メッセージ**: 200万件
- **同時接続**: 200接続
- **結論**: MVP段階では十分

## Proプランが必要になる条件

### 1. データベース容量超過
- **5,000ユーザー以上** または
- **10,000デートプラン以上** または
- **1,000仲裁依頼以上**

### 2. ストレージ容量超過
- **5,000枚以上の画像** または
- **高解像度画像の大量アップロード**

### 3. ユーザー数増加
- **50,000 MAU以上**

### 4. 高度な機能が必要
- **7日間バックアップ**
- **カスタムドメイン**
- **優先サポート**

## 推奨戦略: Freeプランから開始

### Phase 1: Freeプランで開始
```
✅ メリット:
- 月額$0で開発・運用可能
- MVP段階では十分な容量
- 段階的なスケーリングが可能

⚠️ 注意点:
- 容量監視が必要
- バックアップは手動
- カスタムドメイン不可
```

### Phase 2: 成長に応じてProプランへ移行
```
📈 移行タイミング:
- ユーザー数: 1,000人突破
- データベース: 400MB超過
- ストレージ: 800MB超過
- 本格運用開始時
```

## 更新されたコスト見積もり

### Freeプラン段階 (MVP)
- **Supabase Free**: $0
- **Vercel Hobby**: $0
- **OpenAI API**: $10-30/月
- **Stripe**: 手数料のみ
- **Sentry**: $0
- **合計**: $10-30/月

### Proプラン段階 (本格運用)
- **Supabase Pro**: $25
- **Vercel Pro**: $20 (必要に応じて)
- **OpenAI API**: $30-100/月
- **Stripe**: 手数料のみ
- **Sentry**: $0
- **合計**: $75-145/月

## 結論

**Freeプランで十分な理由:**
1. **MVP段階**: 1,000ユーザー、1,000プラン程度なら十分
2. **コスト最適化**: 月額$10-30で運用可能
3. **段階的成長**: 必要に応じてProプランへ移行
4. **学習コスト**: Supabaseの機能を無料で学習可能

**Proプラン移行のタイミング:**
- ユーザー数が1,000人を超えた時
- データベース容量が400MBを超えた時
- 本格的なマーケティングを開始する時
- 7日間バックアップが必要になった時

**推奨**: Freeプランから開始し、成長に応じて段階的にアップグレード
